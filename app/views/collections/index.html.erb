<%= provide(:title, "Collections") %>

<div class="page nobg">
  <div class="heading-with-buttons">

    <h1>Collections</h1>

    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Slug</th>
          <th><%= t('nouns.extension').pluralize.titleize %></th>
          <th>Description</th>
          <th></th>
        </tr>
      </thead>

      <tbody>
      <% @collections.each do |collection| %>
        <%- extensions_count = collection.extensions.count %>
        <tr>
          <td style='white-space: nowrap;'><%= link_to collection.title, edit_collection_path(collection) %></td>
          <td style='white-space: nowrap;'><%= link_to collection.slug, edit_collection_path(collection) %></td>
          <td><%= extensions_count %></td>
          <td><%= collection.description.truncate(55) rescue '' %></td>
          <td>
            <%- if extensions_count == 0 %>
              <%= link_to 'Destroy', collection, method: :delete, data: {confirm: "Are you sure you want to delete the #{collection.slug} collection?"} %>
            <% end %>
          </td>
        </tr>
      <% end %>
      </tbody>
    </table>
    
    <div class='columns small-6'>
      <%= link_to 'New Collection', new_collection_path %>
    </div>

  </div>
</div>